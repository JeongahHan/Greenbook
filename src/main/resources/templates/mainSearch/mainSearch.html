<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>자유게시판</title>

<!-- 구글 아이콘 -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!-- jquery -->
<script src="/js/jquery-3.7.0.js"></script>
<!-- 기본 CSS -->
<link rel="stylesheet" href="/css/board.css">
<link rel="stylesheet" href="/css/default.css">


	
</head>
<body>
	<th:block th:include="common/header"></th:block>


        <div class="page-content">

            <div class="page-title" >
				<p style="font-size: 28px;">통합검색</p>
            </div>
	
			<input type="hidden" name="reqPage" th:value="${reqPage}" id="reqPage">
			<input type="hidden" name="keyword" th:value="${keyword}" id="keyword"> 
			
            <!-- 필터 -->
            <div style="position:fixed; transform: translate(-184px, 60px); display: grid;">
            	<button id="btn" name=button value="product_board" style="width:150px; height:45px; margin-bottom:5px; background-color: #fff; border: 1px solid #005A0D;">중고책방</button>
            	<button id="btn" name=button value="board"  style="width:150px; height:45px; background-color: #fff; border: 1px solid #005A0D;">독서노트</button>
            </div>
            
            <table class="tbl tbl-hover notice-tbl" id="boardtable">
			<tr class="tr-2">
				<th style="width:1%"></th>
				<th style="width:45%">제목</th>
				<th style="width:15%">작성자</th>
				<th style="width:20%">작성일</th>
				<th style="width:10%">조회수</th>
			</tr>
			
			
				<tr class="tr-1" th:each="mainSearchList : ${mainSearchList}">
				<td></td>
				<td style="padding-left: 0px;">
					<a th:if="${mainSearchList.boardType.toString().equals('board')}" th:href ="@{/board/view(boardNo=${mainSearchList.boardNo})}" id="titleLine">
						<span style="padding-right:5px;">[독서노트]</span>
						<span th:text="${mainSearchList.boardTitle}" ></span>
					</a>
					
					<a th:if="${mainSearchList.boardType.toString().equals('product_board')}" th:href ="@{/product/productDetail(productBoardNo=${mainSearchList.boardNo})}" id="titleLine">
						<span style="padding-right:5px;">[중고책방]</span>
						<span th:text="${mainSearchList.boardTitle}" ></span>
					</a>
				</td> 
				<td th:text="${mainSearchList.boardWriter}"></td>
				<td th:text="${mainSearchList.boardRegDate}"></td>
				<td th:text="${mainSearchList.boardReadCount}"></td>
				</tr>
			</table>
			
			<div>
				<div id="pageNavi" th:utext="${pageNavi2}"></div>
			</div>

        </div>

    
    
    
	
	<th:block th:include="common/footer"></th:block>		
		
		
		
<script type="text/javascript">
 

	$("[name=button]").on('click',function(){
		
		const reqPage = $("#reqPage").val();
		const keyword = $("#keyword").val();
		const type = $(this).val();
		console.log(reqPage);
		console.log(keyword);
		console.log(type);

		$.ajax({
				url:"/board/mainSearchList2",
				type:"GET",
				data :  {reqPage:reqPage,keyword:keyword,type:type}, 
				dataType : "json",
				success : function(data){
					console.log(data);
					
					
					//테이블 초기화
					$(".tr-1").empty();
					$("#pageNavi").empty();
					
					if(data.length>=1){
						data.forEach(function(item){
							str="<tr class='tr-1'>";
							str+= "<td>"+"</td>";
							str+="<td>"+item.boardTitle+"</td>";
							str+="<td>"+item.boardWriter+"</td>";
							str+="<td>"+item.boardRegDate+"</td>";
							str+="<td>"+item.boardReadCount+"</td>";
							str+="</tr>";
							
							$('#boardtable').append(str);
							
	        			});
						
					};
					
				}
			}); //ajax
		
		});//click

</script>

		
</body>
</html>	    